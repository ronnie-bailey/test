<div class="tag-categories">
  {% for category in site.data.categories %}
  <div class="category">
    <h3>{{ category.name }}</h3>
    <div class="tags">
      {% for tag_name in category.tags %}
        {% assign tag_posts = site.tags[tag_name] %}
        {% if tag_posts %}
          <a href="{{ '/tags' | relative_url }}#{{ tag_name | slugify }}" 
             class="tag active" 
             style="--size: {{ tag_posts.size | times: 0.2 | plus: 0.8 }}em">
            {{ tag_name }} ({{ tag_posts.size }})
          </a>
        {% else %}
          <span class="tag inactive">
            {{ tag_name }}
          </span>
        {% endif %}
      {% endfor %}
    </div>
  </div>
  {% endfor %}
</div>
